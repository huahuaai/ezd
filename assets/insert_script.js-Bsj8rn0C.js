let q=(n,f)=>{const o=document.createElement("span");o.classList.add("ripple");let i=document.querySelector(".edui-editor-iframeholder"),t=document.querySelector(".drop_btn_container"),h=document.querySelector("#ueditor_0"),r=(h.contentDocument||h.contentWindow.document).querySelector(".view.rich_media_content.autoTypeSetting24psection");console.log(r),i.style.position="relative",i.style.overflow="hidden",i.append(o);const l=i.getBoundingClientRect(),c=Math.max(l.width,l.height);o.style.width=o.style.height=`${c}px`,o.style.left=`${n.clientX-l.left-c/2}px`,o.style.top=`${n.clientY-l.top-c/2}px`,t.style.display="none",o.addEventListener("animationend",()=>{r.innerHTML=f,document.body.querySelector(".drop_btn_container").remove(),o.remove()})},Y=n=>{chrome.runtime.sendMessage({getDropBtn:!0},async f=>{let o=f.drop_btn_string;const i=document.createElement("div");i.innerHTML=o;let t=i.querySelector(".drop_btn_container");t.style.position="fixed",t.style.right="10%",t.style.top="50%",t.style.zIndex="1000",document.body.appendChild(t);let d=document.querySelector(".edui-editor-iframeholder").getBoundingClientRect(),r=d.left,l=d.right,c=d.bottom,b=d.top,y=!1,s,a,u,p,v=0,_=0;const E=()=>{const e=t.getBoundingClientRect(),m=e.left+e.width/2,g=e.top+e.height/2;console.log(m,g,r,l,c,b),m>r&&m<l&&g<c&&g>b?(t.style.cursor="pointer",t.addEventListener("click",X=>{q(X,n)})):t.removeEventListener("click",q)};E();const L=e=>{e.type==="touchstart"?(u=e.touches[0].clientX-v,p=e.touches[0].clientY-_):(u=e.clientX-v,p=e.clientY-_),t.style.cursor="grabbing",e.target===t&&(y=!0)},x=()=>{u=s,p=a,y=!1,t.style.cursor="grab",E()},S=e=>{y&&(e.preventDefault(),e.type==="touchmove"?(s=e.touches[0].clientX-u,a=e.touches[0].clientY-p):(s=e.clientX-u,a=e.clientY-p),v=s,_=a,w(s,a,t))},w=(e,m,g)=>{g.style.transform=`translate3d(${e}px, ${m}px, 0)`};document.addEventListener("touchstart",L,!1),document.addEventListener("touchend",x,!1),document.addEventListener("touchmove",S,!1),document.addEventListener("mousedown",L,!1),document.addEventListener("mouseup",x,!1),document.addEventListener("mousemove",S,!1)})},C=chrome.runtime.connect({name:"getSvgCode"});C.onMessage.addListener(n=>{n.svgcode.length>0&&(console.log(n),console.log(n.svgcode),Y(n.svgcode),n.svgcode="")});
